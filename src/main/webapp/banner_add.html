<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>轮播图添加</title>
    <link rel="stylesheet" href="asserts/bootstrap-3.3.7-dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="asserts/font-awesome-4.7.0/css/font-awesome.min.css" />
    <link rel="stylesheet" href="asserts/layui/css/layui.css">
    <link rel="stylesheet" href="css/main.css">
    <style>

        #demo1{
            height: 80px;
            width: 80px;
            border-radius: 50%;
            border: 1px solid rgba(0,0,0,0.1);
            margin-left: 100px;
        }
        .zoomImage{
            max-height:100px;
        }
    </style>
</head>
<body>
<!-- header -->
<div class="header navbar navbar-default">
    <div class="container-fluid">
        <div class="navbar-header">
            <a class="navbar-brand" href="#">
                秃头宝贝博客后台管理系统
            </a>
        </div>

        <ul class="nav navbar-nav navbar-right">
            <li>
                <a href="javascript:logout()"><span class="glyphicon glyphicon-log-out">&nbsp;</span>安全退出</a>
            </li>
        </ul>

        <form class="navbar-form navbar-right" role="search">
            <div class="form-group">
                <input type="text" class="form-control" placeholder="关键字">
            </div>
            <button type="submit" class="btn btn-default">
                <span class="glyphicon glyphicon-search"></span>
            </button>
        </form>

    </div>
</div>
<!-- header end -->

<div class="body">
    <!-- 侧边栏 -->
    <div class="left">
        <!-- 用户信息 -->
        <div class="user-info">
            <div class="info-icon">
                <img src="img/14.jpg" width="80px" height="80px" class="img-circle" alt="">
            </div>
            <div class="info-name">秃头宝贝</div>
        </div>
        <!-- 菜单 -->
        <div class="list-group text-center">
            <a href="main.html" class="list-group-item"><i class="fa fa-dashboard"></i> 仪表盘</a>
            <a href="banner.html" class="list-group-item active"><i class="fa fa-file-image-o"></i> 轮播管理</a>
            <a href="blog.html" class="list-group-item"><i class="fa fa-file-text-o"></i> 博客管理</a>
            <a href="category.html" class="list-group-item"><i class="fa fa-bars"></i> 类别管理</a>
            <a href="tag.html" class="list-group-item"><i class="fa fa-tags"></i> 标签管理</a>
            <a href="comment.html" class="list-group-item"><i class="fa fa-comment"></i> 留言管理</a>
            <a href="link.html" class="list-group-item"><i class="fa fa-chain"></i> 友情链接</a>
            <a href="ad.html" class="list-group-item"><i class="fa fa-rmb"></i> 广告管理</a>
            <a href="settings.html" class="list-group-item"><i class="fa fa-gear"></i> 个人设置</a>
        </div>
        <div class="copy">Design by 秃头宝贝 &copy; 软帝集团 版权所有</div>
    </div>


    <!-- 内容展示区 -->
    <div class="right">
        <!-- 	导航 -->
        <ol class="breadcrumb">
            <li><i class="fa fa-tags"></i> 轮播图管理</li>
        </ol>
        <div class="container-fluid">
            <!-- 	内容面板 -->
            <div class="panel panel-default">
<!-- 表单区域-->
<fieldset  style="margin-top: 20px">
<!--    <legend>上传轮播图</legend>-->

    <!-- 内容区域-->
    <div class="layui-fluid">
        <div class="layui-col-md6 layui-col-sm8">
            <!--form表单   lay-filter 触发表单事件的唯一表示 -->
            <form  class="layui-form" action=""  lay-filter="adminAdd">

                <!-- 第一行 -->
                <div class="layui-form-item">
                    <!-- 标签-->
                    <label class="layui-form-label">标题</label>
                    <!-- 文本框-->
                    <div class="layui-input-block">
                        <input type="text" name="title" placeholder="请输入标题" required
                               lay-verify="required" class="layui-input" >
                    </div>
                </div>

                <!-- 第二行-->
                <div class="layui-form-item">
                    <!-- 标签-->
                    <label class="layui-form-label">简介</label>
                    <!-- 文本框-->
                    <div class="layui-input-block">
                        <input type="text" name="summary" placeholder="请输入简介" required
                               lay-verify="required" class="layui-input" >
                    </div>
                </div>


                <!-- 图片上传-->
                <div class="layui-form-item">
                    <!-- 文件上传成功的 隐藏域 用于表单提交到后台数据-->


                    <label class="layui-form-label">图片路径</label>
                    <div class="layui-upload">
                        <button type="button" class="layui-btn" id="test1">上传图片</button>
                        <div class="layui-upload-list">
                            <img class="layui-upload-img" id="demo1">
                            <p id="demoText"></p>
                        </div>
                    </div>

                </div>

                <div class="layui-form-item">
                    <!-- 标签-->
                    <label class="layui-form-label">排序</label>
                    <!-- 文本框-->
                    <div class="layui-input-block">
                        <input type="text" name="sort" placeholder="请输入排序" required
                               lay-verify="required" class="layui-input" >
                    </div>
                </div>


                <!-- 第7行  提交 -->
                <div class="layui-form-item">
                    <div class="layui-input-block">
                        <button class="layui-btn" id="btnSubmit" lay-submit lay-filter="myform">提交</button>
                        <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                    </div>
                </div>

            </form>

        </div>
    </div>

</fieldset>
            </div><!-- 	内容面板 end -->
        </div>
    </div><!-- 	内容展示区 end-->
</div>


<!-- 引入js-->
<script src="asserts/layui/layui.js"></script>
<script>
    layui.use(['layer','form','upload','element'],function(){
        var layer = layui.layer;
        var form = layui.form;
        var $ = layui.jquery;
        var upload = layui.upload;
        var element = layui.element;
        var formData = {};
        // 增加文件上传组件

        //常规使用 - 普通图片上传
        var uploadInst = upload.render({
            elem: '#test1'  // 指定上传的按钮组件
            ,url: '/banner/save' //改成您自己的上传接口
            ,auto:false   // 不立马提交 ，需要绑定一个提交按钮
            ,bindAction:'#btnSubmit'   // 绑定提交按钮
            ,data :formData   // 附带表单数据 到后台
            ,field : 'file'  //  默认提交的文件域的name属性 是 file
            ,choose: function(obj){
                //预读本地文件示例，不支持ie8
                obj.preview(function(index, file, result){
                    $('#demo1').attr('src', result); //图片链接（base64）
                });

            }
            ,before:function(obj){
                // 将表单的数据获取 并复制
                formData = form.val('adminAdd');
                // 更新需要提交的数据
                this.data = formData;
                console.log(this.data.title+'======='+this.data.summary+"--------"+this.data.sort);
                console.log(this.data.path);

            }
            ,done: function(res){

                //上传成功的一些操作   将上传成功的地址url地址 添加到
                // $('#demoText').html(''); //置空上传失败的状态
                if(res.code==0){
                    //跳转用户列表页面
                    location.href="banner.html";
                }else{
                    //上传失败
                    layer.msg(res.code+"---"+res.message);
                }
            }
            ,error: function(){
                //演示失败状态，并实现重传
                layer.msg("上传失败！！");
            }

        });


        //监听提交
        form.on('submit(myform)', function(data){
            return false;
        });
    })

</script>
</body>
</html>